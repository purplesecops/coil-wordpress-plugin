/*! Coil Web Monetization for WordPress v1.9.0 Monday 14th March 2022 15:37:17 PM GMT+0200 */
!function(l){if("undefined"!=typeof coilParams&&function(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return console.error("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.error("An error occured when attempting to retrieve the page. Container not found."),!1}()){const P=coilParams.content_container,x=coilParams.paywall_title,C=coilParams.loading_content,k=coilParams.paywall_message,S=coilParams.coil_button_unpaid_message,q=coilParams.coil_button_paid_message,E=Boolean(coilParams.show_coil_button_to_members),j=Boolean(coilParams.show_coil_button_on_mobile),B=coilParams.coil_button_link,A=coilParams.post_excerpt,T=coilParams.admin_missing_id_notice,M=coilParams.paywall_button_text,Q=coilParams.paywall_button_link,H=coilParams.coil_message_branding,I=coilParams.coil_button_theme,N=coilParams.coil_button_size,D=coilParams.coil_button_position,F=coilParams.button_margin_top,G=coilParams.button_margin_right,J=coilParams.button_margin_bottom,K=coilParams.button_margin_left,O=Boolean(coilParams.coil_button_enabled),R=coilParams.site_logo,U=coilParams.coil_logo,V=coilParams.coil_logo_streaming,W=coilParams.coil_logo_white,X=coilParams.coil_logo_white_streaming,Y=coilParams.exclusive_message_theme,Z=Boolean(coilParams.font_selection),$=wp.template("subscriber-only-message"),ee=wp.template("split-content-message"),oe=wp.template("coil-button-message"),te=l("p.monetize-msg");let n=!1;function e(e,o){const t=document.createElement("p");return t.classList.add("monetize-msg"),o&&t.classList.add(o),t.innerHTML=e,t}function o(e){const o=document.createElement("div");o.classList.add("entry-content","coil-message-container"),"dark"===Y&&o.classList.add("coil-dark-theme"),Z&&o.classList.add("coil-inherit-theme-font");let t="";"site_logo"===H&&""!==R?t='<img src="'+R+'">':"coil_logo"===H&&"dark"===Y?t='<img src="'+W+'">':"coil_logo"===H&&(t='<img src="'+U+'">');e={headerLogo:t,title:x,content:e,button:{text:M,href:Q}};return l(o).append($(e)),o}function s(e){e=function(e){const o=D.split("-"),t=o[0],i=o[1],n=document.createElement("div");l(n).addClass("coil-button-message-container "+t+" "+i),j||l(n).addClass("hide-mobile-coil-button");let s="";s="light"===I?(n.classList.add("coil-light-theme"),U):W;"small"===N&&n.classList.add("coil-button-small");var c={headerLogo:s,button:{text:e,href:B}};l(n).append(oe(c));var a=m(F),r=m(G),e=m(J),c=m(K);return l(n).find(".coil-button").css({"margin-top":a+"px","margin-right":r+"px","margin-bottom":e+"px","margin-left":c+"px"}),n}(e);l("body").append(e),l("#js-coil-button-dismiss").on("click",function(){_()||(Cookies.set("ShowCoilButtonMsg",1,{expires:31}),l(this).parent().parent().remove())}),l(".coil-button").hover(function(){l("#js-coil-button-dismiss").css("display","block")},function(){l("#js-coil-button-dismiss").css("display","none")})}function t(){var e=g(),o=0!==l(".coil-button-message-container").length,t=_(),i=0!==l("p.monetize-msg").length,n=0!==l(".coil-message-container").length;!e||o||t||i||n||s(S)}function m(e){return 0<=e.search(/[^1234567890-]/i)?"0":e}function i(e){return ee(e)}function c(){const e=document.querySelector(P);e&&(e.style.display="block")}function a(){if(""!==A){const e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=A,e}}function r(){return jQuery("p.coil-post-excerpt").remove()}function d(){var e=document.body.classList.contains("coil-monetized"),o=document.body.classList.contains("coil-public");return e&&o}function u(){return document.body.classList.contains("coil-exclusive")}function g(){return O&&document.body.classList.contains("show-coil-button")}function b(){var e=document.body.classList.contains("coil-monetized"),o=document.body.classList.contains("coil-gate-tagged-blocks");return e&&o}function p(){return".content-area .entry-content"===P}function f(){return!!document.body.classList.contains("coil-show-excerpt")}function h(){0<l("p.monetize-msg").length&&(l("p.monetize-msg").remove(),u()?f()&&a()?(document.body.classList.add("show-excerpt-message"),l(P).before(o(k)),l(P).prepend(a())):(document.body.classList.add("show-fw-message"),l(P).before(o(k))):b()?(l(".coil-show-monetize-users").prepend(i(k)),l(".coil-show-monetize-users").css("display","block"),c()):(document.body.classList.add("show-fw-message"),document.querySelector(P).before(o(k))))}function _(){var e=Cookies.get("ShowCoilButtonMsg");return void 0!==e&&"1"===e}function y(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?l(P).before(e(T,"admin-message")):l("body").removeClass("coil-missing-id"),d()||p()||(c(),l(P+"*.coil-hide-monetize-users").css("display","none"),l(P+"*.coil-show-monetize-users").css("display","none")),l("body").trigger("coil-missing-id")):d()||(u()&&f()?(l(P).before(a()),l(P).after(e(C,""))):document.querySelector(P).before(e(C,"")),setTimeout(function(){te.html(C)},2e3),setTimeout(function(){r(),h()},5e3)),t()}function w(){(u()||b())&&(r(),function(){const e=document.querySelector(P);e&&(e.style.display="none")}(),document.querySelector(P).before(e(C,""))),setTimeout(function(){!1===n&&l("p.monetize-msg").text()===C&&h()},5e3),t()}function v(e){n=!0;let o="";var t,i;document.body.classList.contains("show-fw-message")&&l("body").removeClass("show-fw-message"),l("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),te.remove(),f()&&l("p.coil-post-excerpt").remove(),u()?l(".entry-content.coil-message-container").remove():b()&&(l(".coil-show-monetize-users").removeClass("coil-show-monetize-users"),l(".coil-split-content-message").remove(),l("*.coil-hide-monetize-users").css("display","none")),c(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),l("body").trigger("coil-monetization-initialized",[e]),0<l("p.monetize-msg").length&&l("p.monetize-msg").remove(),jQuery(window).trigger("resize"),E?(t=g(),i=0!==l(".coil-button-message-container").length,e=_(),o="light"===I?V:X,i?(l(".coil-button a img").attr("src",o),l(".coil-button div").text(q)):t&&!e&&(s(q),l(".coil-button a img").attr("src",o))):l(".coil-button-message-container").remove()}function z(e){var o=e.detail.paymentPointer,t=e.detail.requestId,i=e.detail.amount,n=e.detail.assetCode,s=e.detail.assetScale;l("body").trigger("coil-monetization-progress",[e,o,t,i,n,s])}function L(){if(document.body.classList.contains("monetization-not-initialized"))if(d()||p()||l(P).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":y();break;case"started":document.querySelector(P).before(e(C,"")),l(".coil-message-container").remove();break;case"stopped":w()}document.monetization.addEventListener("monetizationstart",v),document.monetization.addEventListener("monetizationprogress",z)}else window.Cypress&&window.Cypress.monetized||(l("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),u()?(l(P).before(o(k)),f()&&a()?(document.body.classList.add("show-excerpt-message"),l(P).prepend(a())):document.body.classList.add("show-fw-message")):b()?(l(".coil-show-monetize-users").prepend(i(k)),c()):t(),l("body").trigger("coil-extension-not-found"))}l(document).ready(function(){document.addEventListener("coilstart",v),L()})}}(jQuery);