/*! Coil Web Monetization for WordPress v1.9.0 Monday 7th March 2022 12:16:56 PM GMT+0200 */
!function(a){if("undefined"!=typeof coilParams&&function(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return console.error("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.error("An error occured when attempting to retrieve the page. Container not found."),!1}()){const S=coilParams.content_container,n=coilParams.paywall_title,q=coilParams.loading_content,E=coilParams.paywall_message,B=coilParams.coil_button_unpaid_message,i=coilParams.coil_button_paid_message,j=Boolean(coilParams.show_coil_button_to_members),A=Boolean(coilParams.show_coil_button_on_mobile),T=coilParams.coil_button_link,o=coilParams.post_excerpt,M=coilParams.admin_missing_id_notice,Q=coilParams.paywall_button_text,H=coilParams.paywall_button_link,I=coilParams.coil_message_branding,N=coilParams.coil_button_theme,D=coilParams.coil_button_position,F=coilParams.button_margin_top,G=coilParams.button_margin_right,J=coilParams.button_margin_bottom,K=coilParams.button_margin_left,t=Boolean(coilParams.coil_button_enabled),O=coilParams.site_logo,R=coilParams.coil_logo,U=coilParams.coil_logo_streaming,V=coilParams.coil_logo_white,W=coilParams.coil_logo_white_streaming,X=coilParams.exclusive_message_theme,Y=Boolean(coilParams.font_selection),Z=wp.template("subscriber-only-message"),$=wp.template("split-content-message"),ee=wp.template("coil-button-message"),oe=a("p.monetize-msg");let s=!1;function c(e,o){const t=document.createElement("p");return t.classList.add("monetize-msg"),o&&t.classList.add(o),t.innerHTML=e,t}function r(e){const o=document.createElement("div");o.classList.add("entry-content","coil-message-container"),"dark"===X&&o.classList.add("coil-dark-theme"),Y&&o.classList.add("coil-inherit-theme-font");let t="";"site_logo"===I?t='<img src="'+O+'">':"coil_logo"===I&&"dark"===X?t='<img src="'+V+'">':"coil_logo"===I&&(t='<img src="'+R+'">');e={headerLogo:t,title:n,content:e,button:{text:Q,href:H}};return a(o).append(Z(e)),o}function l(e){var o=D.split("-"),t=o[0],n=o[1];const i=document.createElement("div");a(i).addClass("coil-button-message-container "+t+" "+n),A||a(i).addClass("hide-mobile-coil-button");let s="";s="light"===N?(i.classList.add("coil-light-theme"),R):V;o={headerLogo:s,button:{text:e,href:T}};a(i).append(ee(o));t=m(F),n=m(G),e=m(J),o=m(K);return a(i).find(".coil-button").css({"margin-top":t+"px","margin-right":n+"px","margin-bottom":e+"px","margin-left":o+"px"}),i}function m(e){return 0<=e.search(/[^1234567890-]/i)?"0":e}function d(e){return $(e)}function u(){const e=document.querySelector(S);e&&(e.style.display="block")}function g(){if(""!==o){const e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=o,e}}function p(){return jQuery("p.coil-post-excerpt").remove()}function b(){var e=document.body.classList.contains("coil-monetized"),o=document.body.classList.contains("coil-public");return e&&o}function h(){return document.body.classList.contains("coil-exclusive")}function f(){return t&&document.body.classList.contains("show-coil-button")}function y(){var e=document.body.classList.contains("coil-monetized"),o=document.body.classList.contains("coil-gate-tagged-blocks");return e&&o}function _(){return".content-area .entry-content"===S}function w(){return!!document.body.classList.contains("coil-show-excerpt")}function v(){0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),h()?w()&&g()?(document.body.classList.add("show-excerpt-message"),a(S).before(r(E)),a(S).prepend(g())):(document.body.classList.add("show-fw-message"),a(S).before(r(E))):y()?(a(".coil-show-monetize-users").prepend(d(E)),a(".coil-show-monetize-users").css("display","block"),u()):(document.body.classList.add("show-fw-message"),document.querySelector(S).before(r(E))))}function z(){a("#js-coil-button-dismiss").on("click",function(){L()||(Cookies.set("ShowCoilButtonMsg",1,{expires:31}),a(this).parent().parent().remove())})}function L(){var e=Cookies.get("ShowCoilButtonMsg");return void 0!==e&&"1"===e}function P(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?a(S).before(c(M,"admin-message")):a("body").removeClass("coil-missing-id"),b()||_()||(u(),a(S+"*.coil-hide-monetize-users").css("display","none"),a(S+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):b()||(h()&&w()?(a(S).before(g()),a(S).after(c(q,""))):document.querySelector(S).before(c(q,"")),setTimeout(function(){oe.html(q)},2e3),setTimeout(function(){p(),v()},5e3));var e=f(),o=0!==a(".coil-button-message-container").length,t=L(),n=0!==a("p.monetize-msg").length;!e||o||t||n||(a("body").append(l(B)),z())}function x(){(h()||y())&&(p(),function(){const e=document.querySelector(S);e&&(e.style.display="none")}(),document.querySelector(S).before(c(q,""))),setTimeout(function(){!1===s&&a("p.monetize-msg").text()===q&&v()},5e3);var e=f(),o=0!==a(".coil-button-message-container").length,t=L(),n=0!==a("p.monetize-msg").length,i=0!==a(".coil-message-container").length;!e||o||t||n||i||(a("body").append(l(B)),z())}function C(e){s=!0;let o="";var t,n;document.body.classList.contains("show-fw-message")&&a("body").removeClass("show-fw-message"),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),oe.remove(),w()&&a("p.coil-post-excerpt").remove(),h()?a(".entry-content.coil-message-container").remove():y()&&(a(".coil-show-monetize-users").removeClass("coil-show-monetize-users"),a(".coil-split-content-message").remove(),a("*.coil-hide-monetize-users").css("display","none")),u(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&a("p.monetize-msg").remove(),jQuery(window).trigger("resize"),j?(t=f(),n=0!==a(".coil-button-message-container").length,e=L(),n?(o="light"===N?U:W,a(".coil-button img").attr("src",o),a(".coil-button div").text(i)):t&&!e&&(a("body").append(l(i)),z())):a(".coil-button-message-container").remove()}function k(e){var o=e.detail.paymentPointer,t=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,o,t,n,i,s])}function e(){if(document.body.classList.contains("monetization-not-initialized"))if(b()||_()||a(S).not(".coil-post-excerpt").hide(),void 0!==document.monetization){var e,o,t,n,i;switch(document.monetization.state){case"pending":P();break;case"started":document.querySelector(S).before(c(q,"")),a(".coil-message-container").remove();break;case"stopped":x()}document.monetization.addEventListener("monetizationstart",C),document.monetization.addEventListener("monetizationprogress",k)}else window.Cypress&&window.Cypress.monetized||(a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),h()?(a(S).before(r(E)),w()&&g()?(document.body.classList.add("show-excerpt-message"),a(S).prepend(g())):document.body.classList.add("show-fw-message")):y()?(a(".coil-show-monetize-users").prepend(d(E)),u()):(e=f(),o=0!==a(".coil-button-message-container").length,t=L(),n=0!==a("p.monetize-msg").length,i=0!==a(".coil-message-container").length,!e||o||t||n||i||(a("body").append(l(B)),z())),a("body").trigger("coil-extension-not-found"))}a(document).ready(function(){document.addEventListener("coilstart",C),e()})}}(jQuery);