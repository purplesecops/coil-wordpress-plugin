/*! Coil Web Monetization for WordPress v1.9.0 Wednesday 16th March 2022 15:57:04 PM GMT+0200 */
!function(i){if("undefined"!=typeof coilAdminParams&&coilAdminParams.ajax_url){const e=coilAdminParams.site_logo_url,c=coilAdminParams.coil_logo_url.light,s=coilAdminParams.coil_logo_url.dark,o=coilAdminParams.not_monetized_post_types,l=coilAdminParams.exclusive_post_types,a=coilAdminParams.general_modal_msg,r=coilAdminParams.exclusive_modal_msg,u=coilAdminParams.invalid_payment_pointer_msg,p=coilAdminParams.invalid_blank_input_msg,_=coilAdminParams.invalid_url_message,d=i(".nav-tab-wrapper a.nav-tab-active").attr("id"),m="#EE4852",g=i("form").serialize();let n=!1;if("coil-welcome-settings"===d&&(0===i(".coil-welcome-notice").length?i(".tab-styling .button-primary").show():i(".tab-styling .button-primary").hide()),"coil-general-settings"===d){const v=i(".coil-no-payment-pointer-notice");0<v.length&&(v.hide(),0<i("#setting-error-settings_updated").length&&v.show())}function t(t,o,l,e){let i="";o.forEach(t=>{document.getElementById(t+l).checked&&(i+=t+"s, ")}),0<i.length&&(i=i.slice(0,-2),i=i.replace(/,([^,]*)$/," and$1"),e=e.replace("{postTypes}",i),confirm(e)||"boolean"==typeof t.cancelable&&!t.cancelable||(t.preventDefault(),n=!1))}"coil-exclusive-settings"===d&&(i('input[name="coil_exclusive_settings_group[coil_exclusive_toggle]"]').is(":checked")?i("*.exclusive-content-section").show():i("*.exclusive-content-section").hide(),"site_logo"===i("#coil_branding option:selected").val()?i(".set-site-logo-description").show():i(".set-site-logo-description").hide()),"coil-button-settings"===d&&(i('input[name="coil_button_settings_group[coil_button_toggle]"]').is(":checked")?i("*.coil-button-section").show():i("*.coil-button-section").hide()),window.addEventListener("beforeunload",function(t){n||g===i("form").serialize()?delete t.returnValue:(t.preventDefault(),t.returnValue="")}),i(document).on("submit","form",function(){n=!0,"coil-exclusive-settings"===d?t(event,o,"_visibility_exclusive",r):"coil-general-settings"===d&&t(event,l,"_monetization_not-monetized",a)}),i(document).on("focusout","#coil_payment_pointer",function(){const t=i("#coil_payment_pointer");var o;const l=t.next();let e=null;null!==l&&l.hasClass("invalid-input")&&(e=l),/^(https:\/\/.)|^[\$]./.test(i(this).val())?null!==e&&(t.removeAttr("style"),e.remove()):(t.css("border-color",m),i(".invalid-input").length||(t.after('<p class="invalid-input" style="color: '+m+'">'+u+"</p>"),o=i(".invalid-input").prev().prev().position(),i("html, body").animate({scrollTop:o.top+"px"})))}),i(document).on("input","#coil_payment_pointer",function(){const t=i("#coil_payment_pointer");const o=t.next();let l=null;null!==o&&o.hasClass("invalid-input")&&(l=o),null!==l&&/^(https:\/\/.)|^[\$]./.test(i(this).val())&&(t.removeAttr("style"),l.remove())}),i(document).on("change",'input[name="coil_exclusive_settings_group[coil_exclusive_toggle]"]',function(){i(".exclusive-content-section").toggle()}),i(document).on("input","#coil_paywall_title",function(){""!==i(this).val()?i(".coil-paywall-heading").text(i(this).val()):i(".coil-paywall-heading").text(i(this).attr("placeholder"))}),i(document).on("input","#coil_paywall_message",function(){""!==i(this).val()?i(".coil-paywall-body").text(i(this).val()):i(".coil-paywall-body").text(i(this).attr("placeholder"))}),i(document).on("focusout","#coil_paywall_button_text",function(){const t=i("#coil_paywall_button_text"),o=t.next();let l=null;null!==o&&o.hasClass("invalid-input")&&(l=o);var e;/^\s+$/.test(i(this).val())?(t.css("border-color",m),null===l&&(t.after('<p class="invalid-input" style="color: '+m+'">'+p+"</p>"),e=i(".invalid-input").prev().prev().position(),i("html, body").animate({scrollTop:e.top+"px"}))):null!==l&&(t.removeAttr("style"),l.remove())}),i(document).on("input","#coil_paywall_button_text",function(){const t=i("#coil_paywall_button_text"),o=t.next();let l=null;null!==o&&o.hasClass("invalid-input")&&(l=o);const e=/^\s+$/;""===i(this).val()||e.test(i(this).val())?i(".coil-paywall-cta").text(i(this).attr("placeholder")):i(".coil-paywall-cta").text(i(this).val()),e.test(i(this).val())?(t.css("border-color",m),null===l&&t.after('<p class="invalid-input" style="color: '+m+'">'+p+"</p>")):null!==l&&(t.removeAttr("style"),l.remove())}),i(document).on("focusout","#coil_paywall_button_link",function(){const t=i("#coil_paywall_button_link"),o=t.next();let l=null;var e;null!==o&&o.hasClass("invalid-input")&&(l=o),(t=>{let o;try{o=new URL(t)}catch(t){return!1}return"http:"===o.protocol||"https:"===o.protocol})(i(this).val())||""===i(this).val()?null!==l&&(t.removeAttr("style"),l.remove()):(t.css("border-color",m),null===l&&(t.after('<p class="invalid-input" style="color: '+m+'">'+_+"</p>"),e=i(".invalid-input").prev().prev().position(),i("html, body").animate({scrollTop:e.top+"px"})))}),i(document).on("input","#coil_paywall_button_link",function(){const t=i("#coil_paywall_button_link"),o=t.next();let l=null;null!==o&&o.hasClass("invalid-input")&&(l=o);/^\s+$/.test(i(this).val())?(t.css("border-color",m),null===l&&t.after('<p class="invalid-input" style="color: '+m+'">'+p+"</p>")):null!==l&&(t.removeAttr("style"),l.remove())}),i(document).on("change",'input[name="coil_exclusive_settings_group[coil_message_color_theme]"]',function(){var t=i(this).val(),o=i("#coil_branding").val();let l="";i(".coil-paywall-container").attr("data-theme",t),"coil_logo"===o&&(l="light"===t?c:s,i(".coil-paywall-image").attr("src",l))}),i(document).on("change","#coil_branding",function(){"site_logo"===i("#coil_branding option:selected").val()?i(".set-site-logo-description").show():i(".set-site-logo-description").hide()}),i(document).on("change","#coil_branding",function(){var t=i(this).val(),o=i('input[name="coil_exclusive_settings_group[coil_message_color_theme]"]:checked').val();let l="";i(".coil-paywall-image").removeClass("no_logo site_logo coil_logo").addClass(t),"coil_logo"===t?l="light"===o?c:s:"site_logo"===t&&(l=e,""===l?i(".site_logo").hide():i(".site_logo").show()),i(".coil-paywall-image").attr("src",l)}),i(document).on("change",'input[name="coil_exclusive_settings_group[coil_title_padlock]"]',function(){i(this).closest(".coil-row").find(".coil-column-5").toggleClass("hidden")}),i(document).on("change",'input[name="coil_exclusive_settings_group[coil_padlock_icon_position]"]',function(){var t=i(this).val();i(".coil-title-preview-container").attr("data-padlock-icon-position",t)}),i(document).on("change",'input[name="coil_exclusive_settings_group[coil_padlock_icon_style]"]',function(){const t=i(this),o=i(".coil-title-preview-container .coil-padlock-icon"),l=t.siblings("svg").clone();o.html(l)}),i(document).on("change",'input[name="coil_button_settings_group[coil_button_toggle]"]',function(){i(".coil-button-section").toggle()})}}(jQuery);